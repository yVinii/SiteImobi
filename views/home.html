<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Swipper CSS-->
        <link rel="stylesheet" href="../css/swiper-bundle.min.css">

        <!-- Style CSS-->
        <link rel="stylesheet" href="../css/css_pages/style_home.css">
        <link rel="stylesheet" href="../css/css_assets/style_navbar.css">
        <link rel="stylesheet" href="../css/css_assets/style_footer.css">

        <!-- Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">

        <!-- JQuery-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" charset="UTF-8"> </script>
        <title> LSilva negócios imobiliários </title>
    </head>
    <body> 
        <!--Topo do site-->
        <header>
                <div class="logo">
                    <a href="home.html"><img src="../img/completo.png" alt="Logo Lsilva"></a>
                </div>

                <div class="input-header">
                    <input type="text" class="search-txt" placeholder="Busque seu imóvel" maxlength="22">
                    <div class="search-btn" href="">
                        <i class="bi bi-search"></i>
                    </div>
                </div>

                <div class="navigation">
                    <ul class="menu">
                        <div class="close-btn"></div>
                            <li class="menu-item"><a href="/views/home.html">Início</a></li>
                            <li class="menu-item">
                                <a class="sub-btn" href="#">Imóveis <i class="fas fa-angle-down"></i></a>
                                <ul class="sub-menu">
                                    <li class="sub-item"><a href="/views/pagimoveis.html">Venda</a></li>
                                    <li class="sub-item"><a href="/views/pagimoveis.html">Locação</a></li>
                                    <li class="sub-item"><a href="/views/pagimoveis.html">Lançamentos</a></li>
                                </ul>
                            </li>
                            <li class="menu-item">
                                <a class="sub-btn" href="#">Serviços <i class="fas fa-angle-down"></i></a>
                                <ul class="sub-menu">
                                    <li class="sub-item"><a href="/views/cadastreseuimovel.html">Cadastre seu imóvel</a></li>
                                    <li class="sub-item"><a href="/views/pagimoveis.html">Nós encontramos</a></li>
                                    <li class="sub-item"><a href="/views/simuladores.html">Simuladores</a></li>
                                </ul>
                            </li>
                            <li class="menu-item">
                                <a class="sub-btn" href="#">Contato <i class="fas fa-angle-down"></i></a>
                                <ul class="sub-menu">
                                    <li class="sub-item"><a href="telacontato.html">Email</a></li>
                                    <li class="sub-item"><a href="https://api.whatsapp.com/send?phone=5511972998439&text=Ol%C3%A1%2C+gostaria+de+mais+informa%C3%A7%C3%B5es" target="_blank">Whatsapp</a></li>
                                    <li class="sub-item"><a href="#tel">Telefones</a></li>
                                </ul>
                            </li>
                            <li class="menu-item">
                                <a class="sub-btn" href="login.html"><i class="fa-solid fa-user-large"></i></a>
                            </li>
                            
                        </div>
                    </ul>
                </div>
                <div class="menu-btn"></div>
        </header>


        <main>
            <!-- Filtro -->
            <div class="teste-filtro">
                <div class="filtro">
                    <h1>Encontre o imóvel dos seus sonhos</h1>
                    <form class="form-filtro">
                        <div class="input-cidade">
                            <i class="bi bi-geo-fill" style="color: #f5f5f5;"></i>
                            <div class="caixa-localizacao">
                                <label class="label-cidade">
                                    <div class="div-label-cidade">
                                        <p>Cidade</p>
                                    </div>
                                     <div class="input-box">
                                        <select name="cidade" id="cidade">
                                            <option>Selecione</option>
                                        </select>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="input-bairro">
                            <i class="bi bi-house-door-fill" style="color: #f5f5f5;"></i>
                            <div class="caixa-localizacao">
                                <label class="label-bairro">
                                    <div class="div-label-bairro">
                                        <p>Bairro</p>
                                    </div>
                                    <input class="inp-bairro" type="search" placeholder="Busque por bairro">
                                </label>
                            </div>
                        </div>

                        <div class="input-group">
                            <div class="input-box">
                                <label for="tipoimovel">Valor</label>
                                <select name="tipoimovel" id="tipo-negociacao">
                                    <option>Selecione</option>
                                    <option value="1">R$ 100.000,00</option>
                                    <option value="2">R$ 300.000,00</option>
                                    <option value="3">R$ 500.000,00</option>
                                    <option value="4">R$ 700.000,00</option>
                                    <option value="5">R$ 1.000.000,+</option>
                                </select>
                            </div>
    
                            <div class="input-box">
                                <label for="tipoimovel">Quartos</label>
                                <select name="tipoimovel" id="tipo-negociacao">
                                    <option>Selecione</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5+</option>
                                </select>
                            </div>
                        </div>

                        <a href="" id="buscarimovel"><button class="buscar" value="Buscar imóvel" id="buscarimovel">Buscar imóvel</button></a>
                    </form>
                </div>
            </div>

            <!-- Seção Cadastro de imóveis -->
            <section class="cadastro-imovel">
                <div class="cadastre-imovel">
                    <h1>Cadastre seu imóvel</h1>
                    <p>Venha trabalhar conosco, cadastre seu imóvel e faça parte do time LSilva. Garantimos que faremos de tudo para que seu imóvel seja alugado ou comprado.</p>
                    <a href="cadastreimovel.html"><button>Cadastrar imóvel</button></a>
                </div>

                <div class="form-cad-imovel">
                    
                </div>
            </section>

            <!-- Seção Slider dos Destaques -->
            <div class="destaques">
                <h1>Destaques</h1>
                <p>Últimos imóveis adicionados e melhores oportunidades de negócio.</p>
                        

                        <div id="carouselExampleControls" class="carousel carousel-dark slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                              <div class="carousel-item active">
                                    <div class="cards-wrapper">
    
                                        <div class="card">
                                            <div class="image-wrapper" id="images1">
                                                <img src="" alt="...">
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle1"></h5>
                                                <p class="card-text" id="propertyDetails1"></p>
                                                <p class="card-text" id="propertyPrice1"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
    
                                        <div class="card">
                                            <div class="image-wrapper" id="images2">
                                                <img src="" alt="...">
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle2"></h5>
                                                <p class="card-text" id="propertyDetails2"></p>
                                                <p class="card-text" id="propertyPrice2"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
    
                                        <div class="card">
                                            <div class="image-wrapper" id="images3">
                                                <img src="" alt="...">
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle3"></h5>
                                                <p class="card-text" id="propertyDetails3"></p>
                                                <p class="card-text" id="propertyPrice3"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
                                        <div class="card-content">
                                            <h2 class="name">Card Title</h2>
                                            <p class="description">The lorem text the section that contains header with having open functionality. Lorem dolor sit amet consectetur adipisicing elit.</p>
                                            <button class="button">View More</button>
                                        </div>
                                    </div>
                              </div>
    
                              <div class="carousel-item">
                                    <div class="cards-wrapper">
    
                                        <div class="card">
                                            <div class="image-wrapper" id="images4">
                                                <img src="" alt="...">
                                            </div>                                           
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle4"></h5>
                                                <p class="card-text" id="propertyDetails4"></p>
                                                <p class="card-text" id="propertyPrice4"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
    
                                        <div class="card">
                                            <div class="image-wrapper" id="images5">
                                                <img src="" alt="...">
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle5"></h5>
                                                <p class="card-text" id="propertyDetails5"></p>
                                                <p class="card-text" id="propertyPrice5"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
    
                                        <div class="card">
                                            <div class="image-wrapper" id="images6">
                                                <img src="" alt="...">
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle6"></h5>
                                                <p class="card-text" id="propertyDetails6"></p>
                                                <p class="card-text" id="propertyPrice6"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
                                        <div class="card-content">
                                            <h2 class="name">Card Title</h2>
                                            <p class="description">The lorem text the section that contains header with having open functionality. Lorem dolor sit amet consectetur adipisicing elit.</p>
                                            <button class="button">View More</button>
                                        </div>
                                    </div>
                              </div>
    
                              <div class="carousel-item">
                                    <div class="cards-wrapper">
                                        
                                        <div class="card">
                                            <div class="image-wrapper" id="images7">
                                                <img src="" alt="...">
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle7"></h5>
                                                <p class="card-text" id="propertyDetails7"></p>
                                                <p class="card-text" id="propertyPrice7"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
    
                                        <div class="card">
                                            <div class="image-wrapper" id="images8">
                                                <img src="" alt="...">
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle8"></h5>
                                                <p class="card-text" id="propertyDetails8"></p>
                                                <p class="card-text" id="propertyPrice8"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
    
                                        <div class="card">
                                            <div class="image-wrapper" id="images9">
                                                <img src="" alt="...">
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title" id="propertyTitle9"></h5>
                                                <p class="card-text" id="propertyDetails9"></p>
                                                <p class="card-text" id="propertyPrice9"></p>
                                                <a href="#" class="btn btn-primary">Ver imóvel</a>
                                            </div>
                                        </div>
                                        <div class="card-content">
                                            <h2 class="name">Card Title</h2>
                                            <p class="description">The lorem text the section that contains header with having open functionality. Lorem dolor sit amet consectetur adipisicing elit.</p>
                                            <button class="button">View More</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-button-next swiper-navBtn"></div>
                            <div class="swiper-button-prev swiper-navBtn"></div>
                            <div class="swiper-pagination"></div>
                </div>
            </div>

            <!-- Seção de Categorias -->
            <section class="catigoria">
                    <div class="titulo-categorias">
                        <h1>Imóveis</h1>
                        <p>Encontre o imóvel dos sonhos, escolha uma categoria ou veja todos!</p>
                        <div class="categorias">
                            <div class="card-categorias casas">
                                <h2>Casas</h2>
                                <div class="button-categoria btn-1">
                                    <a><button class="buscartipo" value="3">Ver casas</button></a>
                                </div>
                            </div>
        
                            <div class="card-categorias apartamento">
                                <h2>Apartamentos</h2>
                                <div class="button-categoria btn-1">
                                    <a href=""><button>Ver apartamentos</button></a>
                                </div>
                            </div>
        
                            <div class="card-categorias terreno">
                                <h2>Terrenos</h2>
                                <div class="button-categoria btn-1">
                                    <a><button class="buscartipo" value="2">Ver terrenos</button></a>
                                </div>
                            </div>

                            <div class="card-categorias rural">
                                <h2>Rural</h2>
                                <div class="button-categoria btn-1">
                                    <a href=""><button>Ver todos</button></a>
                                </div>
                            </div>

                            <div class="card-categorias galpoes">
                                <h2>Galpões</h2>
                                <div class="button-categoria btn-1">
                                    <a href=""><button>Ver Galpões</button></a>
                                </div>
                            </div>

                            <div class="card-categorias comercial">
                                <h2>Comercial</h2>
                                <div class="button-categoria btn-1">
                                    <a href=""><button>Ver todos</button></a>
                                </div>
                            </div>
                        </div>
                    </div>
            </section>
               
            <!-- Seção degradê antes do footer -->
            <section class="section-two">
                    <section class="card-2 contato">
                        <div class="icon">
                            <img src="../img/envelope.png" alt="">
                        </div>
                        <h3>Fale conosco</h3>
                        <p>Entre em contato caso tenha qualquer dúvida.</p>
                        <a href=""><button>Contato</button></a>
                    </section>

                    <section class="card-2 simulador">
                       <div class="icon">
                            <img src="../img/simuladores.png" alt="Simuladores">
                       </div>
                        <h3>Simuladores</h3>
                        <p>Faça uma simulação para adquirir seu imóvel.</p>
                        <a href=""><button>Simular</button></a>
                    </section>

                    <section class="card-2 cad-imovel">
                        <div class="icon">
                            <img src="../img/casa.png" alt="Cadastre seu imóvel">
                        </div>
                        <h3>Cadastrar imóvel</h3>
                        <p>Cadastre seu imóvel e garanta bons negócios.</p>
                        <a href="/views/cadastreseuimovel.html"><button>Cadastrar</button></a>
                    </section>
            </section>
        </main>

        <!-- Footer -->
        <footer>
            <div id="footer_content">
                <div id="footer_contacts">
                   <h1><img src="../img/completo.png" alt=""></h1>
                    <p>Redes Sociais:</p>

                    <div id="footer_social_midia">
                        <a href="https://www.instagram.com/lsilvaimb/" target="_blank" class="footer-link" id="instagram">
                            <i class="fa-brands fa-instagram"></i>
                        </a>

                        <a href="https://www.facebook.com/profile.php?id=100012613808718" target="_blank" class="footer-link" id="facebook">
                            <i class="fa-brands fa-facebook-f"></i>
                        </a>

                        <a href="https://api.whatsapp.com/send?phone=5511972998439&text=Ol%C3%A1%2C+gostaria+de+mais+informa%C3%A7%C3%B5es" target="_blank" class="footer-link" id="whatsapp">
                            <i class="fa-brands fa-whatsapp"></i>
                        </a>
                    </div>
                </div>

                <ul class="footer-list">
                    <li>
                        <h3>Quem Somos</h3>
                    </li>
                    <li>
                        <a href="" class="footer-link">Sobre nós</a>
                    </li>
                    <li>
                        <a href="" class="footer-link">Política de Privacidade</a>
                    </li>
                    <li>
                        <a href="" class="footer-link">Termos de uso</a>
                    </li>
                </ul>
    
                <ul class="footer-list">
                    <li>
                        <h3>Contato</h3>
                    </li>
                    <li>
                        <a href="https://mail.google.com/mail/?view=cm&to=contato.lsilva@gmail.com" target="_blank" class="footer-link">contato@lsilva.com.br</a>
                    </li>
                    <li>
                        <a class="footer-link" name="tel" style="color: #dddddd;">(11) 4719-6462</a>
                    </li>
                    <li>
                        <a class="footer-link" name="tel" style="color: #dddddd;">(11) 4719-6469</a>
                    </li>
                    <li>
                        <a class="footer-link" name="tel" style="color: #dddddd;">(11) 97299-8439</a>
                    </li>
                </ul>
    
                <div id="footer_endereco">
                    <ul class="footer-list">
                        <li>
                            <h3>Endereço</h3>
                        </li>
                        <li>
                            <a class="footer-link" style="color: #dddddd;">Avenida Tiradentes, 441</a>
                        </li>
                        <li>
                            <a class="footer-link" style="color: #dddddd;">Centro - São-Roque - SP</a>
                        </li>
                        <li>
                            <a class="footer-link" style="color: #dddddd;">CEP - 18130-470</a>
                        </li>
                        <li>
                            <a class="footer-link" style="color: #dddddd;">CRECI - 25717-J</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div id="footer_copyright">
                LSilva
                &#169
                2023 - Todos os direitos reservados.
            </div>
        </footer>


        <!-- Swiper JS -->
        <script src="../javascript/swiper-bundle.min.js"></script>

        <!--Slider JS-->
        <script src="../javascript/slider.js"></script>

        <!-- Navbar -->
        <script src="../javascript/inicio.js"></script>

        <script>

async function carregarCidades() {
    try {
        const response = await fetch('http://localhost:5502/city/');
        const data = await response.json();

        if (response.ok) {
            const cidades = data.city;
            const selectElement = document.getElementById('cidade');
          
            selectElement.innerHTML = '';

            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.text = 'Selecione';
            selectElement.appendChild(defaultOption);

            
            cidades.forEach((city) => {
                const option = document.createElement('option');
                option.text = city.name;
                option.value = city.id;
                selectElement.appendChild(option);
            });

            console.log('Cidades carregadas com sucesso!');
        } else {
            console.log('Erro ao obter cidades:', response.statusText);
        }
    } catch (error) {
        console.log('Erro na requisição:', error);
    }
}

async function carregarPropriedades() {
    try {
        const response = await fetch('http://localhost:5502/properties/');
        const data = await response.json();

        if (response.ok) {
            const properties = data.properties;

            const cityPromises = [];

            properties.forEach((property, index) => {

                cityPromises.push(
                    fetch(`http://localhost:5502/city/${property.idCity}`)
                        .then(cityResponse => cityResponse.json())
                        .then(cityData => {
                            const cityName = cityData;
                const titleElement = document.getElementById(`propertyTitle${index + 1}`);
                const detailsElement = document.getElementById(`propertyDetails${index + 1}`);
                const priceElement = document.getElementById(`propertyPrice${index + 1}`);
                const imageElement = document.getElementById(`images${index + 1}`);

              

                titleElement.textContent = `${property.title} - ${cityData.city.name} - ${property.neighborhood}`;
                detailsElement.textContent = `Quartos: ${property.nbedrooms} / Banheiros: ${property.nbathrooms} / Garagem: ${property.nvacancies} / Área: ${property.groundm2}m²`;
                priceElement.textContent = `${property.typeofsale}: R$ ${property.value}`;

                if (property.images && property.images.length > 0) {
                    const imagesArray = JSON.parse(property.images);
                    if (imagesArray.length > 0) {
                        const imageElement = document.querySelector(`#images${index + 1} img`);
                        imageElement.src = `/backend/public/images/PropertyImages/${imagesArray[0]}`;
                    }
                }
            })
        );
    });
            
        await Promise.all(cityPromises);
            console.log('Propriedades carregadas com sucesso!');
        } else {
            console.error('Erro ao obter propriedades:', response.statusText);
        }
    } catch (error) {
        console.error('Erro na requisição:', error);
    }
}

document.getElementById('buscarimovel').addEventListener('click', function(event) {
    event.preventDefault()

    const cityId = document.getElementById('cidade').value;
    window.location.href = `pagimoveis.html?cityId=${cityId}`;
});


const buttons = document.querySelectorAll('.buscartipo');
buttons.forEach(button => {
    button.addEventListener('click', function(event) {
        event.preventDefault();
        const propertyTypeId = button.value;
        window.location.href = `pagimoveis.html?propertyTypeId=${propertyTypeId}`;
    });  
});










carregarPropriedades();
carregarCidades();

        </script>

          
    <noscript>You neeed enable JavaScript to view the full site.</noscript>
        </body>
</html>